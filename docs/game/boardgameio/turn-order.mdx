# Turn Order

The framework's default behavior is to pass the turn around in a round-robin fashion. A player makes one or more moves before triggering an `endTurn` event, which passes the turn to the next player.

Turn order state is maintained in the following fields:

```
ctx: {
  currentPlayer: '0',
  playOrder: ['0', '1', '2', ...],
  playOrderPos: 0,
}
```

- `currentPlayer`: the playerID of the current player.
- `playOrder`: an array of playerIDs in the order they will receive turns.
- `playOrderPos`: the index of the current player in the `playOrder` array. The default behavior is to just increment it in a round-robin fashion.


## Customizing turn order

Define the `turn` property in the game configuration:

```ts
import { TurnOrder } from 'boardgame.io/core';

const game = {
  turn: {
    order: {
      // Get the initial value of playOrderPos.
      // This is called at the beginning of the phase.
      first: ({ G, ctx }) => 0,

      // Get the next value of playOrderPos.
      // This is called at the end of each turn.
      // The phase ends if this returns undefined.
      next: ({ G, ctx }) => (ctx.playOrderPos + 1) % ctx.numPlayers,

      // OPTIONAL:
      // Override the initial value of playOrder.
      // This is called at the beginning of the game / phase.
      playOrder: ({ G, ctx }) => [...],
    }
  },
};
```

Or using turn [presets](https://boardgame.io/documentation/#/turn-order?id=presets):
- `TurnOrder.DEFAULT`
- `TurnOrder.RESET`
- `TurnOrder.CONTINUE`
- `TurnOrder.ONCE`
- `TurnOrder.CUSTOM`
- `TurnOrder.CUSTOM_FROM`

```ts
import { TurnOrder } from 'boardgame.io/core';

const game = {
  turn: {
    order: TurnOrder.ONCE,
  },
};
```


## Ending a turn

Using `endIf` in the game object:

```ts
const game = {
  turn: {
    endIf: () => ({ next: '3' }),
  },
};
```

Using `endTurn` event:

```ts
function Move({ events }) {
  events.endTurn({ next: '3' });
}
```