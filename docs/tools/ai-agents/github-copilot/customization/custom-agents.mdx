# Custom Agents

## Introduction

Custom agents are Coding Agents that you tailored for specific roles or tasks.

A custom agent consists of instructions and tools that are applied when you switch to that agent.

It allows you to create specialized agents tailored to specific roles, tasks, or workflows.

_For example, a "Plan" agent could include instructions for generating an implementation plan and only use read-only tools._

> [!NOTE]
> This feature is available with the **GitHub Copilot Pro, GitHub Copilot Pro+, GitHub Copilot Business**, and **GitHub Copilot Enterprise** plans.


## Use Cases

Use custom agents when you want to provide context and guidelines for specific roles or tasks.

Examples:
- _Plan_: custom agent has read-only access to the codebase and can only generate implementation plans
- _Research_: custom agent can reach out to external resources to explore new technologies or gather information
- _Front-end developer_: custom agent can only generate and modify code related to front-end development


## Create custom agents

Run the `Chat: New Custom Agent` command in the Command Palette.


## Custom agent file structure

Custom agents are defined in a `.agent.md` Markdown file, and can be stored in:
- Workspace: `.github/agents/*.md`
- User profile
- [Organization](https://docs.github.com/en/copilot/how-tos/administer-copilot/manage-for-organization/prepare-for-custom-agents) or [Enterprise](https://docs.github.com/en/copilot/how-tos/administer-copilot/manage-for-organization/prepare-for-custom-agents).

Custom agent files have two components: **Header** & **Body**.

### Header (optional)

Formatted as YAML frontmatter. Defines the agent's metadata and capabilities.


### Body

Formatted as Markdown. Containing prompts, guidelines, and relevant information that dictate the agent's role and expertise.

You can reference other files by using Markdown links (reuse instructions files).

To reference agent tools, use the `#tool:<tool-name>` syntax.


## Usage

Once created, Custom Agents are available wherever the Copilot Coding Agent can be used, including:

- GitHub.com: Agents tab, Issue assignment, PRs.
- GitHub Copilot CLI.
- Visual Studio Code and other supported IDEs.


## Handoffs between Agents

After a chat response completes, **handoff buttons** let users move to the next agent with relevant context and a pre-filled prompt, enable you to create guided workflows between agents.

Handoffs are useful for orchestrating multi-step workflows.

For example:

- _Planning → Implementation_: Generate a plan in planning agent, then hand off to implementation agent to start coding.
- _Implementation → Review_: Complete implementation, then switch to a code review agent to check for quality and security issues.
- _Write Failing Tests → Write Passing Tests_: Generate failing tests that are easier to review than big implementations, then hand off to make those tests pass by implementing the required code changes.

To **define handoffs**, edit the frontmatter of the agent file. Specify the target agent, the button label, and an optional prompt to send:

```
---
description: Generate an implementation plan
tools: ['search', 'fetch']
handoffs:
  - label: Start Implementation
    agent: implementation
    prompt: Now implement the plan outlined above.
    send: false
---
```


## Share custom agents

View the [official doc](https://code.visualstudio.com/docs/copilot/customization/custom-agents#_share-custom-agents-across-teams-experimental) for more details.


## References

- [Custom agents in VS Code](https://code.visualstudio.com/docs/copilot/customization/custom-agents)
- [GitHub Docs: About Custom Agents](https://docs.github.com/en/copilot/concepts/agents/coding-agent/about-custom-agents)
- [Example Agent Profiles](https://docs.github.com/en/copilot/tutorials/customization-library/custom-agents/your-first-custom-agent)
