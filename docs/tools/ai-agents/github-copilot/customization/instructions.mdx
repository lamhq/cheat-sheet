# Custom instructions

## Introduction

Custom instructions enable you to define common guidelines and rules (in Markdown files) that influence how AI generates code and performs tasks.

You can configure custom instructions to apply automatically to all chat requests or to specific files only.

You can manually attach custom instructions to a specific chat prompt.


## Use cases

- **Define coding standards**: make generated code follows your standards, coding practices, preferred technologies, or project requirements
- **Provide guidelines**: for generating commit message, pull request title and description
- **Set rules for code reviews**: checking for security vulnerabilities, performance issues, or adherence to coding standards


## Types of instructions files

If you have multiple types of instructions files in your project, VS Code combines and adds them to the chat context.

VS Code supports multiple types of Markdown-based instructions files:

### `copilot-instructions.md`

A single Markdown file stored at `.github/copilot-instructions.md`.

It is automatically applies to all chat requests in the workspace.

Enabled by the setting: `github.copilot.chat.codeGeneration.useInstructionFiles`.

Use cases:
- Add context & guidelines for all chat requests in the workspace.
- Enforce consistent coding style (naming conventions, formatting)
- Provide projectâ€‘wide guidelines (e.g., use TypeScript instead of JavaScript).
- Share architectural principles (e.g., prefer functional components in React).

```md title=".github/copilot-instructions.md"
# Copilot Instructions

- Always use TypeScript instead of JavaScript.
- Follow ESLint rules defined in `.eslintrc.json`.
- Prefer functional React components over class components.
- Use async/await instead of Promises.
- Add JSDoc comments for all exported functions.
```


### `*.instructions.md`

Scoped instructions for specific directories, files, or contexts.

Stored in the workspace (`.github/instructions/*.instructions.md`) or user profile directory.

Can be manually attached using **Add Context** > **Instructions** option in the Chat view.

Use cases:
- Add context & guidelines for specific files & directories.
- Different coding styles for frontend vs backend.
- Documentation guidelines for Markdown files.
- Language-specific instructions: python, javascript, etc
- Security rules for sensitive modules.

```md title=".github/instructions/playwright-tests.instructions.md"
---
applyTo: "**/tests/*.spec.ts"
---

## Playwright test requirements

When writing Playwright tests, please follow these guidelines to ensure consistency and maintainability:

1. **Use stable locators** - Prefer `getByRole()`, `getByText()`, and `getByTestId()` over CSS selectors or XPath
1. **Write isolated tests** - Each test should be independent and not rely on other tests' state
1. **Follow naming conventions** - Use descriptive test names and `*.spec.ts` file naming
1. **Implement proper assertions** - Use Playwright's `expect()` with specific matchers like `toHaveText()`, `toBeVisible()`
1. **Leverage auto-wait** - Avoid manual `setTimeout()` and rely on Playwright's built-in waiting mechanisms
1. **Configure cross-browser testing** - Test across Chromium, Firefox, and WebKit browsers
1. **Use Page Object Model** - Organize selectors and actions into reusable page classes for maintainability
1. **Handle dynamic content** - Properly wait for elements to load and handle loading states
1. **Set up proper test data** - Use beforeEach/afterEach hooks for test setup and cleanup
1. **Configure CI/CD integration** - Set up headless mode, screenshots on failure, and parallel execution
```

### `AGENTS.md`

If you work with multiple AI agents in your workspace, you can define custom instructions for all agents.

VS Code automatically applies the file to all chat requests.

Stored in the root of the workspace or in subfolders.

Enabled by setting: `chat.useAgentsMdFile` and `chat.useNestedAgentsMdFiles` (use multiple `AGENTS.md` files).


## Configuration

You can configure custom instructions for specialized scenarios in VS Code settings.

- Code review: `github.copilot.chat.reviewSelection.instructions`
- Commit message generation: `github.copilot.chat.commitMessageGeneration.instructions`
- Pull request title and description generation: `github.copilot.chat.pullRequestDescriptionGeneration.instructions`

```json title=".vscode/settings.json"
{
  "github.copilot.chat.pullRequestDescriptionGeneration.instructions": [
    { "text": "Always include a list of key changes." }
  ],
  "github.copilot.chat.reviewSelection.instructions": [
    { "file": "guidance/backend-review-guidelines.md" },
    { "file": "guidance/frontend-review-guidelines.md" }
  ]
}
```


## Generate instructions files

VS Code can analyze and generate instruction files that match your coding practices and project structure.

In the Chat view, select **Configure Chat** (gear icon) > **Generate Chat Instructions**.


## Instructions writing tips 

Tips for defining custom instructions:

- Keep them short and self-contained. Each instruction should be a single, simple statement.
- Store project-specific instructions in your workspace to share them with other team members and include them in your version control.
- Reuse and reference instructions files in your prompt files and custom agents to keep them clean and focused, and to avoid duplicating instructions.


## Sync user instructions

VS Code can sync your user instructions files across multiple devices by using [Settings Sync](https://code.visualstudio.com/docs/copilot/customization/custom-instructions#_sync-user-instructions-files-across-devices).


## References

- [Use custom instructions in VS Code](https://code.visualstudio.com/docs/copilot/customization/custom-instructions)
- [Example custom instructions](https://docs.github.com/en/copilot/tutorials/customization-library/custom-instructions/your-first-custom-instructions).
- [Using custom instructions to unlock the power of Copilot code review](https://docs.github.com/en/copilot/tutorials/use-custom-instructions)