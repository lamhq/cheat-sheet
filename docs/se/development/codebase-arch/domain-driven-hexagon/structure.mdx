# Code Structure

## Folder structure

- Divide application by modules
- Divide each module by business domain
- Divide each business domain by use cases
- Keep files that change together close to each other ([Common Closure Principle](https://ericbackhage.net/clean-code/the-common-closure-principle/) and [Vertical Slicing](https://jimmybogard.com/vertical-slice-architecture/))
- Group files by behavior (create user, delete user, etc.), not by type (controllers, services, repositories, etc.)
- Shared files like domain objects (entities/aggregates), repositories, shared DTOs, interfaces, etc. are stored outside of feature directory since they are usually reused by multiple subcomponents.
- Respect boundaries in your code, inner layers are not allowed to import outer layers
- Avoid a lot of nested folders


## File names

File name format: `{name}.{type}.ts`

Where:
- `{name}` is the name of the file, which should be descriptive of its purpose
- `{type}` is the type of the file, which can be one of the following:
  - `controller`
  - `service`
  - `repository`
  - `entity`
  - `aggregate`
  - `dto`
  - `interface`
  - `mapper`
  - `command`
  - `query`

Examples:
- `create-user.controller.ts`
- `user.service.ts`
- `user.repository.ts`
- `user.entity.ts`


## Example

```
src
├── modules
│   ├── user
│   │   ├── commands
│   │   │   ├── create-user
│   │   │   │   ├── graphql-example
│   │   │   │   │   ├── dtos
│   │   │   │   │   │   ├── create-user.gql-request.dto.ts
│   │   │   │   │   │   └── id.gql-response.dto.ts
│   │   │   │   │   └── create-user.graphql-resolver.ts
│   │   │   │   ├── create-user.cli.controller.ts
│   │   │   │   ├── create-user.command.ts
│   │   │   │   ├── create-user.http.controller.ts
│   │   │   │   ├── create-user.message.controller.ts
│   │   │   │   ├── create-user.request.dto.ts
│   │   │   │   └── create-user.service.ts
│   │   ├── database
│   │   │   ├── user.repository.port.ts
│   │   │   └── user.repository.ts
│   │   ├── domain
│   │   │   ├── events
│   │   │   │   ├── user-address-updated.domain-event.ts
│   │   │   │   ├── user-created.domain-event.ts
│   │   │   │   ├── user-deleted.domain-event.ts
│   │   │   │   └── user-role-changed.domain-event.ts
│   │   │   ├── value-objects
│   │   │   │   └── address.value-object.ts
│   │   │   ├── user.entity.ts
│   │   │   ├── user.errors.ts
│   │   │   └── user.types.ts
│   │   ├── dtos
│   │   │   ├── graphql
│   │   │   │   ├── user.graphql-response.dto.ts
│   │   │   │   └── user.paginated-gql-response.dto.ts
│   │   │   ├── user.paginated.response.dto.ts
│   │   │   └── user.response.dto.ts
│   │   ├── queries
│   │   │   └── find-users
│   │   │       ├── find-users.graphql-resolver.ts
│   │   │       ├── find-users.http.controller.ts
│   │   │       ├── find-users.query-handler.ts
│   │   │       └── find-users.request.dto.ts
│   │   ├── user.mapper.ts
│   │   └── user.module.ts
```

## References

https://github.com/Sairyss/domain-driven-hexagon/tree/master/src