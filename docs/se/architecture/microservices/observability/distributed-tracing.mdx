# Distributed Tracing

## Overview

Distributed tracing is a technique for tracking requests as they move through multiple microservices in a system. It captures detailed traces of interactions (how services connect, bottlenecks, duration).


## Benefits

- Helps identify performance bottlenecks.
- Shows how requests move through different services.
- Enables teams to diagnose issues faster and optimize performance.

> [!NOTE]
> Correlation IDs are a basic way to track related requests, but they lack visualization and deeper insights. Distributed tracing provides a more sophisticated solution, capturing end-to-end traces of requests across multiple services.


## How it work?

Distributed tracing use spans and sampling to tracks the flow of requests across microservices

A span represents local activity within a thread (such as an operation or request). Each span includes:
- Start and end time (to measure duration).
- Logs related to the span (to provide context).
- Metadata (e.g., customer ID, order ID, hostname) for later querying.

Tracing process:
1. Spans are correlated using a unique identifier.
2. They are sent to a central collector.
3. The collector assembles related spans into a single trace, showing how a request moves through multiple services.

Sampling: Since capturing every trace would overwhelm the system, sampling strategies help reduce the data load:
- Random sampling (e.g., Google's Dapper samples a percentage of calls).
- Fixed-rate sampling (e.g., Jaeger captures only 1 in 1,000 calls by default).
- Dynamic sampling (used by Honeycomb & Lightstep) adjusts sampling rates, collecting more data for errors while limiting data for common operations.


## Implementations

Recommended tools:
- **Jaeger** – A popular open-source distributed tracing tool.
- **Lightstep & Honeycomb** – Commercial solutions offering advanced tracing & high-cardinality support.
- **OpenTelemetry** – A widely adopted open API specification that ensures standardized tracing and better interoperability across different tools.

**Open Telemetry** is an open-source project that provides a set of APIs for collecting and exporting telemetry data; traces, metrics, and logs.

**Zipkin** is a distributed tracing system that collects and stores trace data from microservices, provides a web Ul for viewing and analyzing trace data.

To use Open Telemetry with Zipkin, Open Telemetry SDK is used to collect trace data, and send data to a Zipkin server for storage and visualization.