# Choosing Database

## Best Practices

1. **Use the Right Tool for the Right Job**. Don't default to one database type for everything, leverage different database technologies based on specific application needs
2. **Focus on the Data Type & Access Patterns**. Match the database to how data is structured and used 
3. **Understand the Trade-offs**. Some systems may prioritize **Availability** over **Consistency**, especially in user-facing apps where uptime is critical.
4. **Consider Development Team Competence**. Even the best database is useless if your team can’t manage it effectively.


## Questions to Ask

1. What Data Consistency Level Is Required?
   - **Strong consistency (ACID)**: Needed for critical operations like financial transactions.
   - **Eventual consistency**: Acceptable for use cases like product recommendations or social feeds.
2. How Flexible Does the Schema Need to Be?
   - **Predictable and stable schema** → Use relational databases.
   - **Dynamic and evolving schema** → Use NoSQL databases like document stores.
3. What Are the Data Volume and Workload Characteristics?
   - **Low volume**: Relational or lightweight NoSQL may suffice.
   - **High volume / write-heavy**: NoSQL databases built for horizontal scaling are better suited.
4. What Are the Read Requirements and Query Complexity?
   - **Complex joins and normalized data** → Favor SQL databases.
   - **Simple key lookups or denormalized documents** → Favor NoSQL.
5. What Is the Desired Deployment Structure?
   - **Centralized**: Simpler setup, but may limit scalability.
   - **Distributed across regions**: Requires databases that support replication and partition tolerance.
6. Are There Performance Requirements?
   - If your service needs **low latency** for reads/writes, consider in-memory databases or optimized NoSQL solutions.
7. What Are the Scalability Requirements?
   - If you expect **rapid growth**, choose databases that support horizontal scaling (e.g., Cassandra, MongoDB).
8. What Are the Availability Requirements?
   - For services that must be **always available**, prioritize databases that support **high availability** and **partition tolerance**.


## Data Model Decision Tree

- Structured Data
  - OLTP workload: ACID, transactions
    - **Relational Databases**
  - OLAP workload: Analytics
    - **Columnar Databases**
- Semi structured Data:
  - Dictionary:
    - **Key-value Databases**
      - For Caching:
        - **In-memory Databases**
  - 2D Key-Value:
    - **Wide Column Databases**
      - Time Series:
        - **Time Series Database**
      - Audit Trail:
        - **Immutable Ledger Database**
      - Location & Geo-entities:
        - **Geospatial Database**
  - Entity-Relationships:
    - **Graph Databases**
  - Nested Objects: XML, JSON
    - **Document Database**
      - Full Text Search:
        - **Text Search Databases**
- Unstructured Data: images, videos, recordings, documents
  - **Blob storage**

![](https://www.ml4devs.com/images/illustrations/sql-vs-nosql-cheatsheet.webp)


## SQL vs. NoSQL

Reference: [SQL vs. NoSQL Database: When to Use, How to Choose](https://www.ml4devs.com/articles/datastore-choices-sql-vs-nosql-database/)

![](https://www.ml4devs.com/images/illustrations/sql-vs-nosql-comparision.webp)


### Data Model

RDBMS databases are used for normalized structured (tabular). Data strictly adhering to a relational schema. Not all data fits into strict RDBMS schema.

NoSQL datastores excel at handling unstructured or semi-structured data, suitable for applications requiring high scalability, flexible schemas, and rapid development, such as:
- content management systems
- real-time analytics
- Internet of Things (IoT) data storage
- social networks
- applications with large volumes of diverse data formats


### Transaction Guarantees

All RDBMS databases support ACID transactions

Most NoSQL datastores offer BASE transactions. Only a few NoSQL datastores are ACID-complaint.


### Scaling

RDBMS scale vertically. You need to upgrade hardware (more powerful CPU, higher storage capacity) to handle the increasing load. RDBMS did not scale horizontally for Big Data.

NoSQL datastores offer horizontal scale at various CAP Theorem tradeoffs. NoSQL is better at handling partitioned data, so you can scale by adding more machines.


### Performance

RDBMS are designed for fast transactions updating multiple rows across tables with complex integrity constraints. It will optimize your query (SQL) and find the best execution plan.

NoSQL datastores are designed for efficiently handling a lot more data than RDBMS. NoSQL offers performance at a higher scale (typically by giving up strong consistency). 
