# Render

## Logic inside a component

There're two types of logic inside a component:

### Rendering code

This is where you take the props and state, transform them, and return the JSX you want to see on the screen.

Rendering code must be pure.

### Event handlers

They are nested functions inside your components that do things rather than just calculate them:

- update an input field
- submit an HTTP POST request to buy a product
- navigate the user to another screen

Event handlers contain **[side effects](./effect.mdx)**.


## UI tree

The UI tree represents the structure of your React components as they are nested and rendered.

It models the hierarchy of components—how parent and child components relate to each other.

It helps React understand how to render the interface and manage component relationships.

For example, if your app has `<App>` → `<Header>` → `<Nav>`, React builds a tree showing this nesting.


## Virtual DOM

The Virtual DOM is an **in-memory representation** of the actual DOM, built using lightweight JavaScript objects.

React compares the current Virtual DOM with a new one after state changes (using a diffing algorithm), then updates only the changed parts in the real DOM.

It allows React to **efficiently update** the real DOM by minimizing direct manipulations, reduces unnecessary re-renders and improves speed by batching updates and avoiding full DOM repaints.


## Render Process

Before your components are displayed on the screen, they must be rendered by React. 

The process of rendering UI has three steps:

1. Triggering a render
2. Rendering the component
3. Committing to the DOM


### Trigger a render

There are two reasons for a component to render:

**1. It's component's initial render**:

It's done by calling `render`on the React root:

```js
import Image from './Image.js';
import { createRoot } from 'react-dom/client';

const root = createRoot(document.getElementById('root'))
root.render(<Image />);
```

**2. State has been updated**

State updates (happening inside the component, its ancestors, hooks) trigger a re-render.


### React renders your components

Rendering means that React is calling your component, which is a function:

- On initial render, React will call the root component.
- For subsequent renders, React will call the function component whose state update triggered the render and get the new JSX snapshot.


### React commits changes to the DOM 

After rendering (calling) your components, React will modify the DOM.

- For the **initial render**, React will use the `appendChild()` DOM API to put all the DOM nodes it has created on screen.
- For **re-renders**, React will apply the minimal necessary operations (calculated while rendering!) to make the DOM match the latest rendering output.

React only changes the DOM nodes if there's a difference between renders.

After React updated the DOM, the browser will repaint the screen.


## Component lifecycle

1. A component **mounts** when it's added to the screen.
2. A component **updates** when it receives new props or state, usually in response to an interaction.
3. A component **unmounts** when it's removed from the screen.


## References

https://react.dev/learn/render-and-commit