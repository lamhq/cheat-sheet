# Project structure

## Recommended Structure

My recommended structure for a Next.js project:

1. Store application code (including `app`) inside a `src` folder. This separates application code from project configuration files in the root of a project.
2. Store the globally shared application code in the root `app` directory
3. Keep route-specific code (components, hooks, utils, etc.) inside its route segment.
4. Group related route segments base on feature or module with Route Groups

```
my-nextjs-app/
├── .env                        # Default environment variables
├── .env.local                  # Local environment variables
├── .env.production             # Production environment variables
├── .env.development            # Development environment variables
├── next.config.js              # Next.js configuration
├── tsconfig.json               # TypeScript configuration (if using TS)
├── next-env.d.ts               # TypeScript declaration file for Next.js
├── package.json                # Project dependencies and scripts
├── public/                     # Static assets (images, fonts, etc.)
└── src/                        # Application code lives here
    ├── app/                    # App Router root
    │   ├── layout.tsx          # Global layout
    │   ├── error.tsx           # Global error boundary
    │   ├── loading.tsx         # Global loading UI
    │   ├── (auth)/             # Route group: auth feature
    │   │   ├── login/          # `/login` route
    │   │   │   └── page.tsx
    │   │   ├── register/       # `/register` route
    │   │   │   └── page.tsx
    │   │   └── components/     # Auth-specific components
    │   └── (blog)/             # Route group: blog feature
    │       ├── page.tsx        # home route `/`
    │       ├── [slug]/         # Dynamic route: `/:slug`
    │       │   └── page.tsx
    │       ├── components/     # Blog-specific components
    │       └── utils/          # Blog-specific utilities
    ├── components/             # Shared components across the app
    ├── hooks/                  # Shared hooks across the app
    └── lib/                    # Shared utilities
```


## app directory

```
app/
├── layout.tsx            # Layout
├── page.tsx              # Page (route: "/")
├── loading.tsx           # Loading UI
├── not-found.tsx         # Not found UI
├── error.tsx             # Error UI
├── global-error.tsx      # Global error UI
├── route.ts              # API endpoint
├── template.tsx          # Re-rendered layout
├── default.tsx           # Parallel route fallback page
├── about/
│   ├── layout.tsx        # Layout for /about and its children
│   └── page.tsx          # About page (route: "/about")
└── blog/
    ├── page.tsx          # Blog index (route: "/blog")
    └── [slug]/           # Dynamic route (e.g., "/blog/my-post")
        └── page.tsx
```


## Component hierarchy

Components defined in special files (`layout.tsx`, `page.tsx`, `loading.tsx`, ...) are rendered in a specific hierarchy:

![Component Hierarchy for File Conventions](https://h8DxKfmAPhn8O0p3.public.blob.vercel-storage.com/docs/light/file-conventions-component-hierarchy.png)

Components of a route segment will be nested inside the components of its parent segment:

![Nested File Conventions Component Hierarchy](https://h8DxKfmAPhn8O0p3.public.blob.vercel-storage.com/docs/light/nested-file-conventions-component-hierarchy.png)
