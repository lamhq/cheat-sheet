# Logger

Logging functionality is provided via the `Logger` class in the `@nestjs/common` package.

## Disable logging

To disable logging, set the `logger` property to `false` in the `NestFactory.create()` method.

```ts
const app = await NestFactory.create(AppModule, {
  logger: false,
});
await app.listen(3000);
```


## Enable specific logging levels

set the `logger` property to an array of strings specifying the log levels to display:

```ts
const app = await NestFactory.create(AppModule, {
  logger: ['error', 'warn'],
});
await app.listen(3000);
```


## Disable color

The logger service uses module `cli-color`, setting environment variable `NO_COLOR` disables the output of color codes.

```sh
export NO_COLOR=1
```


## Accessing logging service

```ts
import { Logger, Injectable } from '@nestjs/common';

@Injectable()
class MyService {
  private readonly logger = new Logger('context name');

  doSomething() {
    this.logger.log('Doing something...');
  }
}
```

## Define custom logger

```ts
import { LoggerService } from '@nestjs/common';

export class MyLogger implements LoggerService {
  /**
   * Write a 'log' level log.
   */
  log(message: any, ...optionalParams: any[]) {}

  /**
   * Write an 'error' level log.
   */
  error(message: any, ...optionalParams: any[]) {}

  /**
   * Write a 'warn' level log.
   */
  warn(message: any, ...optionalParams: any[]) {}

  /**
   * Write a 'debug' level log.
   */
  debug?(message: any, ...optionalParams: any[]) {}

  /**
   * Write a 'verbose' level log.
   */
  verbose?(message: any, ...optionalParams: any[]) {}
}
```


## Extending built-in logger

```ts
// my-logger.service.ts
import { ConsoleLogger } from '@nestjs/common';

export class MyLogger extends ConsoleLogger {
  error(message: any, stack?: string, context?: string) {
    // add your tailored logic here
    super.error.apply(this, arguments);
  }
}
```


## Using custom logger

Create a `LoggerModule` as shown below, and provide `MyLogger` service from that module.

```ts
import { Module } from '@nestjs/common';
import { MyLogger } from './my-logger.service';

@Module({
  providers: [MyLogger],
  exports: [MyLogger],
})
export class LoggerModule {}
```

Because application instantiation `(NestFactory.create()`) happens outside the context of any module, it doesn't participate in the normal Dependency Injection phase of initialization. So we must ensure that at least one application module imports the `LoggerModule` to trigger Nest to instantiate a singleton instance of our `MyLogger` class.

We can then instruct Nest to use the same singleton instance of `MyLogger` with the following construction:

```ts
const app = await NestFactory.create(ApplicationModule, {
  // make sure all logs will be buffered until a custom logger is attached 
  bufferLogs: true,
});
app.useLogger(app.get(MyLogger));
await app.listen(3000);
```

Next, import the `LoggerModule` into your feature module. 

```ts
import { Injectable } from '@nestjs/common';
import { MyLogger } from './my-logger.service';

@Injectable()
export class CatsService {
  private readonly cats: Cat[] = [];

  constructor(private myLogger: MyLogger) {
    // Due to transient scope, CatsService has its own unique instance of MyLogger,
    // so setting context here will not affect other instances in other services
    this.myLogger.setContext('CatsService');
  }

  findAll(): Cat[] {
    // You can call all the default methods
    this.myLogger.warn('About to return cats!');
    // And your custom methods
    this.myLogger.customLog();
    return this.cats;
  }
}
```


## Other topics

- [Logger](https://docs.nestjs.com/techniques/logger#logger): Introduces the built-in text-based logger in NestJS for system logging and outlines customization options like disabling, formatting, and overriding.
- [Basic customization](https://docs.nestjs.com/techniques/logger#basic-customization): Configures basic logger settings such as disabling logging, enabling specific log levels, disabling colorized output, and setting prefixes using the `logger` property in `NestFactory.create()`.
- [JSON logging](https://docs.nestjs.com/techniques/logger#json-logging): Enables structured JSON logging by setting `json: true` in `ConsoleLogger` for integration with log aggregators and platforms like AWS ECS.
- [Using the logger for application logging](https://docs.nestjs.com/techniques/logger#using-the-logger-for-application-logging): Instantiates `Logger` class in services with context for consistent logging behavior across Nest system and application events.
- [Logs with timestamps](https://docs.nestjs.com/techniques/logger#logs-with-timestamps): Adds timestamps to log messages by setting `timestamp: true` in `Logger` constructor to display time differences between messages.
- [Custom implementation](https://docs.nestjs.com/techniques/logger#custom-implementation): Implements a custom logger by fulfilling the `LoggerService` interface and supplying it via the `logger` property for full control over logging.
- [Extend built-in logger](https://docs.nestjs.com/techniques/logger#extend-built-in-logger): Extends `ConsoleLogger` class to override selected methods for tailored logging logic while delegating to parent class.
- [Dependency injection](https://docs.nestjs.com/techniques/logger#dependency-injection): Registers custom logger as a provider in a module for dependency injection, enabling injection of services like `ConfigService` and use for system logging via `app.useLogger()`.
- [Injecting a custom logger](https://docs.nestjs.com/techniques/logger#injecting-a-custom-logger): Creates transient-scoped custom logger extending `ConsoleLogger` for unique instances in feature modules, allowing context-aware logging and custom methods.
- [Use external logger](https://docs.nestjs.com/techniques/logger#use-external-logger): Integrates external logging libraries like `Winston` or `Pino` for advanced production logging requirements such as filtering and centralized logging.