# Volume

## Overview

A volume can be used to hold data and state for Pods and containers.

A Pod can have multiple Volumes attached to it.

A Volume references a storage location, each must have a unique name.

A Volume Mount references a Volume and mounts it to a specific path in the container.


## Volume types

- **emptyDir**: empty directory that exists as long as the Pod is running. Useful for sharing files between containers in a Pod.
- **hostPath**: mounts a directory from the host node's filesystem into the container. Not recommended for production use.
- **nfs**: An NFS (Network File System) share mounted into the Pod.
- **configMap/secret**: Mounts a ConfigMap or Secret as a file or directory.
- **persistentVolumeClaim**: Mounts a Persistent Volume (PV) into the Pod.
- **Cloud**: mount a cloud storage from Cloud provider (AWS, Azure, GCP, etc.)


### emptyDir

```yaml title="emptydir.pod.yaml"
apiVersion: v1
kind: Pod
metadata:
  name: emptydir-pod
spec:
  containers:
  - name: nginx
    image: nginx:latest
    ports:
    - containerPort: 80
    volumeMounts:
    - name: shared-html
      mountPath: /usr/share/nginx/html
  - name: updater
    image: alpine:latest
    command: ["/bin/sh", "-c"]
    args:
    - |
      while true; do
        echo "<html><body><h1>$(date)</h1></body></html>" > /html/index.html;
        sleep 5;
      done
    volumeMounts:
    - name: shared-html
      mountPath: /html
  volumes:
  - name: shared-html
    emptyDir: {}
```

- The `emptyDir` volume is shared between both containers.
- Alpine writes `index.html` with the current date every 5 seconds.
- nginx automatically serves the updated file from the shared volume.


### hostPath

A web server that serves files from the host's `/html` directory:

```yml
apiVersion: v1
kind: Pod
metadata:
  name: nginx-hostpath-pod
spec:
  containers:
  - name: nginx
    image: nginx:latest
    ports:
    - containerPort: 80
    volumeMounts:
    - name: host-html
      mountPath: /usr/share/nginx/html
      readOnly: true
  
  volumes:
  - name: host-html
    hostPath:
      path: /html
      type: DirectoryOrCreate
```


## Viewing a Pod's Volume

```sh
kubectl describe pod [pod-name]
```
