# Contexts

## Overview

Contexts are a way to access information about workflow runs, the runner environment, jobs, and steps.

They are objects that contain properties you can use in expressions to create dynamic behavior, like conditional logic.

For example, to use the `github.event` context in your workflow:
```yml
jobs:
  triage:
    if: >-
      github.event.pull_request.user.login != 'octobot' &&
      github.event.pull_request.user.login != 'dependabot[bot]'
    runs-on: ubuntu-latest
```


## Available Contexts

- `github`: Contains information about the workflow run and the event that triggered it.
- `env`: Provides access to environment variables that are set in the workflow, job, or step.
- `secrets`: A secure context for accessing secrets, such as tokens and API keys, that are stored in the repository settings.
- `runner`: Provides information about the runner that is currently executing the job, including its operating system and architecture.
- `job`: Contains details about the current job, such as its status.
- `steps`: Allows you to access the outputs and status from previous steps within the same job.
- `strategy`: Used exclusively with matrix jobs to provide information about the matrix execution strategy.
- `matrix`: Also for matrix jobs, this context provides the specific matrix values for the current job instance.
- `needs`: Lets a job access the outputs from other jobs that it depends on.


## Printing context information

You can print the contents of contexts to the log for debugging using the [`toJSON`](https://docs.github.com/en/actions/learn-github-actions/expressions#tojson) function.

```yaml
name: Context testing
on: push

jobs:
  dump_contexts_to_log:
    runs-on: ubuntu-latest
    steps:
      - name: Dump GitHub context
        env:
          GITHUB_CONTEXT: ${{ toJson(github) }}
        run: echo "$GITHUB_CONTEXT"
      - name: Dump job context
        env:
          JOB_CONTEXT: ${{ toJson(job) }}
        run: echo "$JOB_CONTEXT"
      - name: Dump steps context
        env:
          STEPS_CONTEXT: ${{ toJson(steps) }}
        run: echo "$STEPS_CONTEXT"
      - name: Dump runner context
        env:
          RUNNER_CONTEXT: ${{ toJson(runner) }}
        run: echo "$RUNNER_CONTEXT"
      - name: Dump strategy context
        env:
          STRATEGY_CONTEXT: ${{ toJson(strategy) }}
        run: echo "$STRATEGY_CONTEXT"
      - name: Dump matrix context
        env:
          MATRIX_CONTEXT: ${{ toJson(matrix) }}
        run: echo "$MATRIX_CONTEXT"
```


## `github`

It contains information about the workflow run and the event that triggered it. This includes the event payload, repository, and commit details.

Properties:
- `github.event`: The full webhook event payload. You can access nested properties like `github.event.pull_request.number` or `github.event.issue.labels.*.name`.
- `github.event_name`: The name of the event that triggered the workflow, e.g., `push`, `pull_request`, or `issue_comment`.
- `github.ref`: The Git reference that triggered the workflow run, like `refs/heads/main` for a branch or `refs/tags/v1.0.1` for a tag.
- `github.sha`: The commit SHA that triggered the workflow.
- `github.actor`: The username of the person or app that initiated the workflow run.
- `github.repository`: The owner and name of the repository, e.g., `octocat/Spoon-Knife`.
- `github.run_number`: A unique, sequential number for each workflow run in a repository.


## `env`

This context contains the environment variables set in the workflow, job, or step.

Properties:
- `env.MY_VARIABLE`: Any custom environment variable you've defined. You access its value using the variable name.


## `secrets`

This context provides access to the repository's secrets, which are securely stored encrypted values.

Properties:
- `secrets.GITHUB_TOKEN`: The built-in token automatically generated by GitHub for each workflow run. It's used for authenticating with the GitHub API.
- `secrets.MY_SECRET`: Any custom secret you've defined, like API keys or passwords.


## `runner`

This context contains details about the runner that is executing the job.

Properties:
- `runner.os`: The operating system of the runner, e.g., `Linux`, `Windows`, or `macOS`. This is often used in `if` conditions to run steps only on a specific OS.
- `runner.name`: The name of the runner.
- `runner.arch`: The architecture of the runner, e.g., `X64`.


## `job`

This context provides information about the current job.

Properties:
- `job.status`: The current status of the job, which can be `success`, `failure`, `cancelled`, or `skipped`.


## `steps`

This context allows you to access outputs and status from previous steps in the same job.

Properties:
- `steps.<step_id>.outputs.<output_name>`: The value of an output variable from a step with a specific ID.
- `steps.<step_id>.outcome`: The outcome of a previous step, like `success` or `failure`.


## `strategy`

This context is only available for matrix jobs and contains information about the matrix execution strategy.

Properties:
- `strategy.job-index`: The index of the current job within the matrix.
- `strategy.job-total`: The total number of jobs in the matrix.


## `matrix`

This context is also for matrix jobs and contains the specific matrix properties for the current job.

Properties:
- `matrix.os`: The OS value for the current matrix job, e.g., `ubuntu-latest`.
- `matrix.node-version`: The Node.js version for the current matrix job.
